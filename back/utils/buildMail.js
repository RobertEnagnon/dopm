const CLIENT_URL = process.env.CLIENT_URL

exports.buildMail = (url) => {
    /**
     * En production on pourra utiliser les images dans le front
     * Decommenter juste les 2 lignes suivantes 
     * en developpement on ne peut pas vraiment utiliser ${CLIENT_URL} car ce dernier est un localhost
     * Un gestionnaire de mail ne peut pas acceder à localhost
     */
    const logo = `https://i.ibb.co/6b7J3j1/logo-sodigitale.png`//`${CLIENT_URL}/img/logo_sodigitale.png`
    const banniere = `https://i.ibb.co/P12PVXz/banniere.jpg`//`${CLIENT_URL}/img/banniere.jpg`

    return `
     <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns:v="urn:schemas-microsoft-com:vml"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500&display=swap" rel="stylesheet"></head><body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" bgcolor="#fff" style="background-color: #fff;"><table bgcolor="#fff" width="100%" border="0" cellpadding="0" cellspacing="0" style="font-family: arial, Verdana, sans-serif;"><tbody><tr><table align="center" bgcolor="#fff" width="600px" border="0" cellpadding="0" cellspacing="0" style="color: #fff;"><tbody><tr bgcolor="#fff" height="40px" style="background-color: #fff; height: 40px;"><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td></tr></tbody></table><table align="center" bgcolor="#fff" width="600" height="130" border="0" cellpadding="0" cellspacing="0" style="box-shadow: 0px 4px 5px 2px rgb(88 88 88 / 14%); color: #fff; width: 600px; height: 130px;"><tbody><tr><td><img src="${banniere}" style="width: 600px; height: 130px;" width="600" height="130" alt="DOPM"></td></tr></tbody></table><table align="center" bgcolor="#ffffff" width="600px" border="0" cellpadding="0" cellspacing="0" style="box-shadow: 0px 4px 5px 2px rgb(88 88 88 / 14%); color: #fff;"><tbody><tr bgcolor="#fff" height="40" style="background-color: #fff; height: 40px;"><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td></tr><tr><td width="20" style="width: 20px;">&nbsp;</td><td align="center" style="color: #153D77; font-family: 'Open Sans', Verdana, sans-serif; line-height: 150%; mso-line-height-rule: exactly; font-size: 40px; font-weight: bold; text-align: left;">Réinitialiser le mot de passe </td><td width="20" style="width: 20px;">&nbsp;</td></tr><tr bgcolor="#fff" height="10" style="background-color: #fff; height: 10px;"><td height="10" style="font-size:10px; mso-line-height-rule: exactly; line-height: 10px;">&nbsp; </td><td height="10" style="font-size:10px; mso-line-height-rule: exactly; line-height: 10px;">&nbsp; </td><td height="10" style="font-size:10px; mso-line-height-rule: exactly; line-height: 10px;">&nbsp; </td></tr><tr><td width="20" style="width: 20px;">&nbsp;</td><td align="center" style="overflow-wrap: break-word; color: #686666; font-family: 'Open Sans', Verdana, sans-serif; font-size: 18px; text-align: left;">Une demande de réinitialisation de mot de passe a été effectuée sur votre compte DOPM </td><td width="20" style="width: 20px;">&nbsp;</td></tr><tr bgcolor="#fff" height="20" style="background-color: #fff; height: 20px;"><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td></tr><tr><td width="20" style="width: 20px;">&nbsp;</td><td align="center" style="color: #686666; font-family: 'Open Sans', Verdana, sans-serif; font-size: 18px; text-align: left;">Cliquez ici pour entrer le nouveau mot de passe </td><td width="20" style="width: 20px;">&nbsp;</td></tr><tr bgcolor="#fff" height="20" style="background-color: #fff; height: 20px;"><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td></tr><tr><td width="20" style="width: 20px;">&nbsp;</td><td align="center" width="560" style="text-align: left;"><span bgcolor="#153D77" style="background: #153D77; padding: 10px 20px 10px 20px; border-radius: 10px; display: inline-block;"><a href="${url}" target="_blank" style="color: #fff; text-decoration:none; text-decoration: none; font-family: 'Open Sans', Verdana, sans-serif; font-size: 18px;">REINITIALISER MON MOT DE PASSE</a></span></td><td width="20" style="width: 20px;">&nbsp;</td></tr><tr bgcolor="#fff" height="20" style="background-color: #fff; height: 20px;"><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td></tr><tr><td width="20" style="width: 20px;">&nbsp;</td><td align="center" width="560" style="width: 560px; color: #686666; font-family: 'Open Sans', Verdana, sans-serif; font-size: 18px; text-align: left;">Le bouton ne fonctionne pas ? Copiez ceci dans votre navigateur </td><td width="20" style="width: 20px;">&nbsp;</td></tr><tr bgcolor="#fff" height="20" style="background-color: #fff; height: 20px;"><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td></tr><tr><td width="20" style="width: 20px;">&nbsp;</td><td align="center" width="560" style="overflow-wrap: break-word; word-break: break-all; max-width: 560px; width: 560px; color: #686666; font-family: 'Open Sans', Verdana, sans-serif; font-size: 18px; text-align: left;">${url} </td><td width="20" style="width: 20px;">&nbsp;</td></tr></tbody></table><table align="center" bgcolor="#ffffff" width="600px" border="0" cellpadding="0" cellspacing="0" style="box-shadow: 0px 4px 5px 2px rgb(88 88 88 / 14%); color: #fff;"><tbody><tr><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td></tr><tr><td style="text-align: center;"><img src="${logo}" alt="DOPM LOGO" height="83" style="height: 83px;"></td></tr><tr><td height="20" style="font-size:20px; mso-line-height-rule: exactly; line-height: 20px;">&nbsp; </td></tr></tbody></table><table align="center" bgcolor="#fff" width="600px" border="0" cellpadding="0" cellspacing="0" style="color: #fff;"><tbody><tr bgcolor="#fff" height="40px" style="background-color: #fff; height: 40px;"><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td><td height="40" style="font-size:40px; mso-line-height-rule: exactly; line-height: 40px;">&nbsp; </td></tr></tbody></table></tr></tbody></table></body></html>
     `
}